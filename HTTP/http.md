# HTTP

## メッセージヘッダ

- HOST  
  リクエストを送るサーバーのドメイン名とポート番号を示す
- User-Agent  
  UA の種類をサーバーに知らせる役割（chrome or FireFox or ...）
- Referer  
  リクエスト URI の参照基ページの URI
- Content-Length  
  ボディのデータ長を示す
- Accept（要求）  
  UA で処理可能なリソースのメディアタイプを示す
  メディアタイプ：テキストファイル or 画像 or 音声 or ...
- Content-type（応答）  
  リソースのメディアタイプを示す
  レスポンスでは必須のヘッダ。
  Accept と Content-type は UA とサーバーで利用できるメディアタイプの確認のために使用される。一方でしか利用できない場合は 406 Not Acceptable というステータスコードで通知する。

## キャッシュ

ページの情報をブラウザに保存（キャッシュ）しておいて再度アクセスするときにはそれを参照する。サーバー側ではレスポンス時に`Cache-Control`ヘッダに、「キャッシュを許可するか」、「いつまで許可するか」などの情報を入れる。これはブラウザがいつまでもキャッシュを参照して古い情報を表示してしまうことへの対策。もう一つの対策としては条件付き GET がある。これは、今のキャッシュの更新日付以降に更新されたかを問い合わせて（`IF-Modifeid-Since`ヘッダをつける）、更新されていなければリソースなしでレスポンスを返されてキャッシュを参照し、更新されていればリソースを含めてレスポンスされる仕組み。

## HTTP の認証

### Basic 認証

- ログインのための userID と password は予めサーバー側で設定する（基本的にユーザーからは登録などはできない）。
- 認証が必要なページにリクエストがくると、ログインフォームがダイアログとして表示される。
- ダイアログのログインフォームの表示はブラウザの機能として行われるため、サーバー側でフォームを作成しておく必要がない。
- パスワードは平文（BASE64 でコード化されるが元に戻せる）で送信されるため脆弱。

### ダイジェスト認証

- Basic 認証の「平文で送信されることを改善した」認証方式
- ユーザー ID、パスワード、チャレンジコード（＝ナンス値、認証が必要な場合にサーバーから送られる。これをチャレンジアンドレスポンス方式という）の 3 つを MD5 でハッシュ化したものを送信する
- リプレイ攻撃や中間者攻撃（MITM）には対処できないため Basic 認証と同様にあまり使われない

### その他

HTTP の認証ではないが、web アプリケーション側で「ログインフォームの作成」、「認証を行うプログラムの作成」をしてログインをさせる方法が一般的。
Form 認証と呼ばれたりする。
