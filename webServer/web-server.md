# Web サーバー レポート

## メッセージ・キューイング

クライアント（システムあるいはシステムを構成するサービス）同士がメッセージをやり取りする仕組み．データの送信側は，送るデータをキューと呼ばれるデータ領域に保持させ、データを受ける側の処理が完了するのを待たずに次の処理へ移る（非同期）．

【メリット】

- 送信する側はキューにデータを置くだけで、送り先と同期できなくても確実にデータを送り届けることができる
- アプリケーション間連携は緩やかなものになり、柔軟に統合することが可能になる．

## AMQP （Advanced Message Queuing Protocol）

多数のシステムやサービスが非同期にメッセージを交換するメッセージキューイングを実現するための通信プロトコルの一つ（アプリケーション層のプロトコル）．
メッセージ指向ミドルウェア（MOM：Message-Oriented Middleware）を介して多数の通信主体が 1：1 または 1：N で互いにメッセージを交換するための通信方式と，メッセージのデータ形式を定めている．

## リバースプロキシ

インターネットから内部ネットワーク（web サーバー）の通信を中継して，コンテンツを返すサーバー．インターネットからはあたかも Web サーバーに直接アクセスしているかように見える．

【メリット】

- セキュリティの向上
  外からはバックエンドサーバの情報を認識できないため，悪意のあるクライアントが直接バックエンドサーバにアクセスして脆弱性を利用することができない．
- 拡張性と柔軟性の向上
  クライアントにはリバースプロキシの IP アドレスしか表示されないため，バックエンド構成を自由に変更できる．ロードバランシングされた環境では特に有用であり，トラフィック量の変動に応じてサーバを増減できる．
- キャッシュや圧縮による高速化
  リバースプロキシ上で Web アプリケーションファイアウォールなどのセキュリティ対策をすることで，Web サーバ／アプリに直接手を加えることなく安全性を高められる．
- 負荷分散 （クラスタ構成の場合）
  大量のアクセスが想定される場合，同じ処理をする Web サーバ／アプリを複数用意しておき，リバースプロキシによってリクエストを分散させる．クライアントからは単一サーバ構成と変わらないように維持しつつ，大量のアクセスをさばけるシステムを構築できる．

## ロードバランサ（負荷分散装置）

インターネットから受け取ったアクセスをすべて集約してからどのサーバーに割り振るかを決定する仕組み（クラスタ構成が前提）．送信先は各サーバーに割り当てられた IP アドレスで，ロードバランサー自身には仮想 IP アドレスが設定されている．

## 用語

- クラスタ構成
  複数のサーバを連携させて利用者や他のサーバから全体で 1 台のサーバであるかのように動作させる技術
- RabbitMQ
  「メッセージ・キューイング」を実現するソフトウェア
